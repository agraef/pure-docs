\input texinfo   @c -*-texinfo-*-
@c %**start of header
@setfilename pure-readline.info
@documentencoding UTF-8
@ifinfo
@*Generated by Sphinx 1.1.3.@*
@end ifinfo
@settitle pure-readline
@defindex ge
@paragraphindent 2
@exampleindent 4
@afourlatex
@dircategory Pure Language and Library Documentation
@direntry
* pure-readline: (pure-readline.info). pure-readline
@end direntry

@c %**end of header

@copying
@quotation
Pure 0.63, October 23, 2014

Albert Gräf (Editor)

Copyright @copyright{} 2009-2014, Albert Gräf et al
@end quotation

@end copying

@titlepage
@title pure-readline
@insertcopying
@end titlepage
@contents

@c %** start of user preamble

@c %** end of user preamble

@ifnottex
@node Top
@top pure-readline
@insertcopying
@end ifnottex

@c %**start of body
@anchor{pure-readline doc}@anchor{1}@anchor{pure-readline module-readline}@anchor{0}
@geindex readline (module)

Version 0.3, October 22, 2014

Albert Graef <@email{aggraef@@gmail.com}>

Get the latest source from
@indicateurl{https://bitbucket.org/purelang/pure-lang/downloads/pure-readline-0.3.tar.gz}.

This is a trivial wrapper around GNU readline, which gives Pure scripts access
to the most important facilities of the readline interface. This includes
support for the @code{readline} function itself (without custom completion at
present) and basic history management. The wrapper can also be used with the
BSD editline a.k.a. libedit library, a readline replacement licensed under the
3-clause BSD license. You can find these at:


@itemize -

@item 
GNU readline: @indicateurl{http://tiswww.tis.case.edu/~chet/readline/rltop.html}

@item 
BSD editline/libedit: @indicateurl{http://www.thrysoee.dk/editline}
@end itemize

We recommend GNU readline because it's easier to use and has full UTF-8
support, but in some situations BSD editline/libedit may be preferable for
license reasons or because it's what the operating system provides. Note that
in either case Pure programs using this module are subject to the license
terms of the library that you use (GPLv3+ in case of GNU readline, BSD license
in the case of BSD editline/libedit).

Normally, you should choose the same library that you use with the Pure
interpreter, to avoid having two different versions of the library linked into
your program. (This doesn't matter if you only use this module with
batch-compiled scripts, though, since the Pure runtime doesn't depend on
readline in any way.) By default, the module will be built with GNU readline.
To select editline/libedit instead, you only have to uncomment a line at the
beginning of the Makefile. Also, you might want to check the beginning of
readline.c for the proper location of the corresponding header files.

The module provides the following functions:

@geindex readline (function)
@anchor{pure-readline readline}@anchor{2}
@deffn {Pure Function} readline prompt

Read a line of input from the user, with prompting and command line
editing. Returns the input line (with the trailing newline removed), or
@code{NULL} when reaching end of file.
@end deffn

@geindex add_history (function)
@anchor{pure-readline add_history}@anchor{3}
@deffn {Pure Function} add_history line

Adds the given line (a string) to the command history.
@end deffn

@geindex clear_history (function)
@anchor{pure-readline clear_history}@anchor{4}
@deffn {Pure Function} clear_history

Clears the command history.
@end deffn

@geindex read_history (function)
@anchor{pure-readline read_history}@anchor{5}
@deffn {Pure Function} read_history fname

Reads the command history from the given file. Note that this in fact
@emph{adds} the contents of the history file to the current history, so you may
want to call @pxref{4,,clear_history} beforehand if this function is called
multiple times.
@end deffn

@geindex write_history (function)
@anchor{pure-readline write_history}@anchor{6}
@deffn {Pure Function} write_history fname

Writes the current command history to the given file.
@end deffn

Example:

@example
> using readline;
> readline "input> ";
input> Hello, world!
"Hello, world!"
> add_history ans;
()
> readline "input> ";
input> <EOF>
#<pointer 0x0>
> write_history "history"; // save the history
0
> clear_history;
> read_history "history"; // read the history
0
@end example

@noindent

@menu
* Module Index:: 
* Index:: 

@end menu

@node Module Index,Index,Top,Top
@unnumbered Module Index


@menu
* readline: 0. 
@end menu


@node Index,,Module Index,Top
@unnumbered Index


@printindex ge

@c %**end of body
@bye
